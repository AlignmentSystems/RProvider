<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>How does it work?
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="An F# Type Provider providing strongly typed access to the R statistical package">
    <meta name="author" content="BlueMountain Capital">

    <script src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="http://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="http://bluemountaincapital.github.io/Deedle/content/style.css" />
    <script type="text/javascript" src="http://bluemountaincapital.github.io/Deedle/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/BlueMountainCapital/FSharpRProvider">github page</a></li>
          <li><a href="http://bluemountaincapital.github.io/Deedle">Deedle</a></li>
          <li><a href="http://fsharp.github.io/FSharp.Charting/">F# Charting</a></li>
          <li><a href="http://fsharp.github.io/FSharp.Data/">F# Data</a></li>
        </ul>
        <h3 class="muted">Deedle</h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1>How does it work?</h1>

<h2>How do we call into R?</h2>

<p>The RProvider loads the R.DLL (which contains the core of R) into the calling process, via <a href="http://rdotnet.codeplex.com/">RDotNet</a>.  This will happen in several places:</p>

<ul>
<li>In the IDE, to provide IntelliSense for packages/functions/parameters.</li>
<li>In the F# compiler, to generate code that calls the R functionality you are calling.</li>
<li>In your resulting binary, to execute the generated code.</li>
<li>In F# Interactive, to do all of the above interactively.</li>
</ul>

<h2>How does RDotNet help?</h2>

<p>RDotNet allows R functionality to be called from .NET, and exposes an object model for representing R values (based on the type RDotNet.SymbolExpression).  Using RDotNet, one executes R code by passing strings of R code into an Evaluate method.  From the RProvider, we introspect on available R packages and functions and expose them as members of provided types.  You can then call them just like regular .NET functions, with IntelliSense and compile-time checking.  RDotNet.SymbolicExpression provides a nice OO model of the R native SEXP type, so we simply expose results using that type.  To make it more friendly from F#, we extend it with some extension members and active patterns.</p>

<h2>How do we expose R packages?</h2>

<p>RProvider determines the set of installed packages in your R installation and exposes them as namespaces under the root RProvider namespace.  This allows you to 'open' the namespaces you want to use as if they were regular .NET namespaces.</p>

<p>Under the namespace for a given package, RProvider exposes a single static type called "R", which contains static methods mirroring each of the functions and values that exist in the package.  This means that the members under "R." will be the union of available functions in all of the package namespaces you have opened.</p>

<h2>Is it Statically Typed?</h2>

<p>Kind of.  It is statically type checked to the extent that it can be given the type information available from R.  In practice, this means that the F# compiler and IDE statically checks that the function you are calling exists in the package you are calling.  In some cases, we can also determine that you are not passing too many arguments to the function, though common use of ... (aka varargs/params) in R functions defeats that in many cases.</p>

<p>R is dynamically typed, so we cannot determine what the types of function arguments are supposed to be.  So all arguments are of type obj.  R functions can also be written such that they will work even if arguments that do not have default values are omitted, so we expose each argument as optional.  And for R functions that accept a ... argument, we expose a paramarray argument that allows any number of additional arguments to be passed.  In that case, you can basically pass any number of arguments to the function.</p>


        </div>
        <div class="span3">
          <a href="https://nuget.org/packages/RProvider">
            <img src="http://bluemountaincapital.github.io/Deedle/images/logo.png" style="width:140px;height:140px;margin:10px 0px 0px 35px;border-style:none;" />
          </a>

          <ul class="nav nav-list" id="menu">
            <li class="nav-header">Deedle</li>
            <li><a href="http://bluemountaincapital.github.io/Deedle/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="https://nuget.org/packages/RProvider">Get Library via NuGet</a></li>
            <li><a href="http://github.com/BlueMountainCapital/FSharpRProvider">Source Code on GitHub</a></li>
            <li><a href="http://github.com/BlueMountainCapital/FSharpRProvider/blob/master/LICENSE.md">License (BSD)</a></li>
            <li><a href="http://github.com/BlueMountainCapital/FSharpRProvider/blob/master/RELEASE_NOTES.md">Release Notes</a></li>
            <li><a href="http://github.com/BlueMountainCapital/FSharpRProvider/issues">Bug reports & feature requests</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="http://bluemountaincapital.github.io/Deedle/Charts-QuickStart.html">Creating charts</a></li>
            <li><a href="http://bluemountaincapital.github.io/Deedle/Statistics-QuickStart.html">Statistics</a></li>
            <li><a href="http://bluemountaincapital.github.io/Deedle/passing-data.html">Passing data between F# and R</a></li>
            <li class="divider"></li>
            <li><a href="http://bluemountaincapital.github.io/Deedle/tutorial.html">Analysing stock prices</a></li>
            <li><a href="http://bluemountaincapital.github.io/Deedle/howto.html">R packages & naming</a></li>

            <li class="nav-header">Internals</li>
            <li><a href="http://bluemountaincapital.github.io/Deedle/whatwhy.html">Whats and whys</a></li>
            <li><a href="http://bluemountaincapital.github.io/Deedle/internals.html">How does it work</a></li>
            
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/BlueMountainCapital/FSharpRProvider"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
    <script>
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
      ga('create', 'UA-45379232-2', 'bluemountaincapital.github.io');
      ga('send', 'pageview');
    </script>
  </body>
</html>